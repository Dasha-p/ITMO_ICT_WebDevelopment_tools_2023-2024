# API Endpoints для работы с компаньонами

## Описание

Данный набор эндпоинтов представляет интерфейс для работы с компаньонами

### GET `/trips/{trip_id}/companions/`

- **Цель**: Получение списка всех сопутствующих участников определённой поездки.
- **Параметры пути**:
    - `trip_id`: идентификатор поездки.
- **Параметры запроса**:
    - `status`: необязательный параметр для фильтрации сопутствующих по их статусу в поездке.
- **Логика**: Проверяется существование поездки по `trip_id`. Затем выполняется запрос к базе данных для получения
  списка сопутствующих с возможной фильтрацией по статусу.
- **Ответ**: Список объектов `CompanionBaseDetail`, представляющих собой информацию о каждом сопутствующем и
  соответствующем пользователе.

### POST `/trips/{trip_id}/companions/`

- **Цель**: Добавление текущего аутентифицированного пользователя в качестве сопутствующего к указанной поездке.
- **Параметры пути**:
    - `trip_id`: идентификатор поездки.
- **Логика**: Проверяется, что указанная поездка существует и что текущий пользователь не является её создателем. Затем
  проверяется, не добавлен ли пользователь уже в качестве сопутствующего. Если все проверки пройдены, создаётся новая
  запись сопутствующего.
- **Ответ**: Объект `CompanionBaseDetail`, содержащий информацию о новом сопутствующем и пользователе.

### GET `/trips/{trip_id}/companions/{companion_id}/`

- **Цель**: Получение детальной информации о конкретном сопутствующем участнике поездки.
- **Параметры пути**:
    - `trip_id`: идентификатор поездки.
    - `companion_id`: идентификатор сопутствующего.
- **Логика**: Проверяется существование поездки и сопутствующего с заданными идентификаторами. Если сопутствующий
  принадлежит указанной поездке, информация о нём извлекается из базы данных.
- **Ответ**: Объект `CompanionBaseDetail`, содержащий детальную информацию о сопутствующем и соответствующем
  пользователе.

### PATCH `/trips/{trip_id}/companions/{companion_id}/`

- **Цель**: Обновление статуса сопутствующего участника поездки.
- **Параметры пути**:
    - `trip_id`: идентификатор поездки.
    - `companion_id`: идентификатор сопутствующего.
- **Параметры запроса**:
    - `status_`: новый статус сопутствующего (передаётся в теле запроса).
- **Логика**: Проверяется, что текущий пользователь является создателем поездки, и что сопутствующий принадлежит
  указанной поездке. Если условия выполняются, статус сопутствующего обновляется.
- **Ответ**: Обновлённый объект `CompanionBaseDetail`, отражающий изменения в статусе.