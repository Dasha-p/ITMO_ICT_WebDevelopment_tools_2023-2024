# Документация Dockerfile

Этот Dockerfile используется для создания Docker-образа для Python-приложения.

## Базовый образ

```dockerfile
FROM python:3.11.9-slim-bookworm
```

Первая строка указывает базовый образ для Docker-образа. В данном случае используется образ `python:3.11.9-slim-bookworm`,
который представляет собой облегченную версию Python 3.11.9, основанную на дистрибутиве Debian Bookworm. Этот образ
предоставляет минимальную среду Python для дальнейшей сборки.

## Рабочая директория

```dockerfile
WORKDIR /application
```

Инструкция `WORKDIR` устанавливает рабочую директорию внутри контейнера в `/application`. Это означает, что все последующие
инструкции в Dockerfile будут выполняться в контексте этой директории.

## Копирование файла зависимостей

```dockerfile
COPY requirements.txt .
```

Инструкция `COPY` копирует файл `requirements.txt` с хост-машины в текущую рабочую директорию (`.`) внутри контейнера. Этот
файл обычно содержит список зависимостей Python, необходимых для приложения.

## Переменные окружения

```dockerfile
ENV PYTHONUNBUFFERED 1
ENV PYTHONDONTWRITEBYTECODE 1
```

Инструкции `ENV` устанавливают переменные окружения внутри контейнера.

- `PYTHONUNBUFFERED` устанавливается в `1`, что обеспечивает немедленный вывод Python в логи контейнера, а не буферизацию
  вывода.
- `PYTHONDONTWRITEBYTECODE` устанавливается в `1`, что предотвращает запись Python `.pyc` файлов (скомпилированного байт-кода)
  на диск. Это помогает уменьшить размер образа контейнера.

## Установка зависимостей

```dockerfile
RUN pip install --no-cache-dir -r requirements.txt
```

Инструкция `RUN` выполняет команду внутри контейнера во время процесса сборки. В данном случае она запускает `pip install` для
установки зависимостей Python, перечисленных в файле `requirements.txt`. Флаг `--no-cache-dir` используется для избежания
сохранения кеша pip, что помогает уменьшить размер образа.

## Копирование кода приложения

```dockerfile
COPY . .
```

Последняя инструкция `COPY` копирует все файлы и директории из текущей директории хост-машины (где находится Dockerfile) в
текущую рабочую директорию внутри контейнера. Это копирует весь код приложения в контейнер.

---

Когда этот Dockerfile используется для сборки Docker-образа, он создает образ со следующими характеристиками:

- Он основан на образе `python:3.11.9-slim-bookworm`.
- Код приложения копируется в директорию `/application` внутри контейнера.
- Зависимости Python, перечисленные в `requirements.txt`, устанавливаются.
- Переменные окружения `PYTHONUNBUFFERED` и `PYTHONDONTWRITEBYTECODE` устанавливаются для оптимизации поведения контейнера.
